{% load staticfiles %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ثبت‌نام</title>
    <link type="text/css" rel="stylesheet" href={% static "register.css" %}>
    <link rel="stylesheet" type="text/css" href={% static "fonts/yekan/weblogma_yekan.css" %}>
    <link type="text/css" rel="stylesheet" href={% static "sass/materialize.css" %}/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" href={% static "images/doctor_checkup_logo.png" %}>
    {#    <link href={% static "time_picker/jquery.timepicker.css" %} rel="stylesheet" type="text/css">#}
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src={% static "js/bin/materialize.min.js" %}></script>
    <script type="text/javascript">
        <!--
        function showForm() {
            var doctorForm = $("#doctor-form");
            ($("#is-doctor:checked").length == 1) ? doctorForm.show() : doctorForm.hide();
        }
        //-->
        $(document).ready(function () {

            $(":input").addClass("validate");

            {% if userprofileform.errors %}
                {% for field in userprofileform %}
                    {% for error in field.errors %}
                        $('#{{ field.id_for_label }}').prop('required', true);
                        $('#{{ field.id_for_label }}').removeClass('validate');
                        $('#{{ field.id_for_label }}').addClass('invalid');
                        $('label[for=' + '{{ field.id_for_label }}' + ']').attr('data-error', '{{ error }}');

                    {% endfor %}
                {% endfor %}
                {% for error in userprofileform.non_field_errors %}

                {% endfor %}
            {% endif %}
            {% if userform.errors %}
                {% for field in userform %}
                    {% for error in field.errors %}
                        $('#{{ field.id_for_label }}').removeClass('validate');
                        $('#{{ field.id_for_label }}').addClass('invalid');
                        $('label[for=' + '{{ field.id_for_label }}' + ']').attr('data-error', '{{ error }}');

                    {% endfor %}
                {% endfor %}
                {% for error in userform.non_field_errors %}

                {% endfor %}
            {% endif %}
            {% if doctorprofile.errors %}
                {% for field in doctorprofile %}
                    {% for error in field.errors %}
                        $('#{{ field.id_for_label }}').addClass('invalid');
                        $('label[for=' + '{{ field.id_for_label }}' + ']').attr('data-error', '{{ error }}');
                        $('label[for=' + '{{ field.id_for_label }}' + ']').addClass('active');

                    {% endfor %}
                {% endfor %}
                {% for error in doctorprofile.non_field_errors %}

                {% endfor %}
            {% endif %}
        });
    </script>

</head>
<body>
<div class="navbar-fixed">
    <nav>
        <div class="nav-wrapper">
            <a href="/" class="brand-logo center">دکتریاب</a>
        </div>
    </nav>
</div>

<div class="row _register-form">
    {% if userform.errors %}
        {% for error in userform.non_field_errors %}
            <p class="right red-text">{{ error }}</p>
        {% endfor %}
    {% endif %}
    <form class="col s12" action="" method="post">
        {% csrf_token %}
        {% for f in userform %}
            <div class="row">
                <div class="input-field">
                    {{ f }}
                    <label for={{ f.id_for_label }}>{{ f.label }}</label>
                </div>
            </div>
        {% endfor %}

        {% for f in userprofileform %}
            <div class="row">

                <div class="input-field">
                    {{ f }}
                    <label for={{ f.id_for_label }}>{{ f.label }}</label>
                </div>
            </div>
        {% endfor %}
        <p>
            <input id="is-doctor" type="checkbox" class="filled-in" name="c1" onclick="showForm()">
            <label for="is-doctor">پزشک هستم</label>
        </p>
        <div id="doctor-form" style="display:none">
            {% for f in doctorprofile %}
                {% if f.name == 'contract' %}
                    <div class="file-field input-field">
                        <div class="btn right grey">
                            <span>قرارداد</span>
                            {{ f }}
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text">
                        </div>
                    </div>
                {% else %}
                    <div class="row">
                        <div class="input-field">
                            {{ f }}
                            <label for={{ f.id_for_label }}>{{ f.label }}</label>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <button class=" btn-large waves-effect waves-light left _submit-btn" type="submit" name="action">ثبت‌نام
        </button>
    </form>
</div>
</body>
</html>